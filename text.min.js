var videoSource=new Array;videoSource[0]="video/01.mp4",videoSource[1]="video/02.mp4",videoSource[2]="video/03.mp4";var pointLight,stats,permalink,hex,camera,cameraTarget,scene,renderer,group,textMesh1,textMesh2,textGeo,materials,videoCount=videoSource.length;THREE.Cache.enabled=!0;var video,firstLetter=!1,text="",height=20,size=50,hover=30,curveSegments=4,bevelThickness=2,bevelSize=1.5,bevelEnabled=!0,font=void 0,fontName="NanumMyeongjo",fontWeight="Regular",rotationX=0,rotationY=0,textX=0,textY=-40,textZ=700,mirror=!0,fontMap={NanumMyeongjo:0,Tium:1,TmonMonsoriBlack:2},weightMap={Regular:0,Bold:1};function decimalToHex(e){var t=Number(e).toString(16);return(t="000000".substr(0,6-t.length)+t).toUpperCase()}function init(){const e=document.createElement("div");document.getElementById("myCanvas").appendChild(e),(camera=new THREE.PerspectiveCamera(30,1,3,1e4)).position.set(textX,textY,textZ),cameraTarget=new THREE.Vector3(0,0,0),(scene=new THREE.Scene).fog=null,video=document.getElementById("myVid");var t=new THREE.BoxBufferGeometry(700,700,-600),o=new THREE.VideoTexture(myVid),n=new THREE.MeshBasicMaterial({map:o}),i=new THREE.Mesh(t,n);scene.add(i);var r=new THREE.DirectionalLight(16777215,.125);r.position.set(100,100,1).normalize(),scene.add(r);var a=new THREE.DirectionalLight(16777215,.125);a.position.set(599,100,200).normalize(),scene.add(a);var d=new THREE.DirectionalLight(16777215,.125);d.position.set(0,100,1).normalize(),scene.add(d);var c=new THREE.DirectionalLight(16777215,.125);c.position.set(599,100,1).normalize(),scene.add(c),(pointLight=new THREE.PointLight(16777215,1.5)).position.set(400,100,90),scene.add(pointLight),0==document.location.hash.substr(1).length&&(pointLight.color.setHex(16711680),hex=decimalToHex(pointLight.color.getHex())),materials=[new THREE.MeshPhongMaterial({color:16777215,flatShading:!0}),new THREE.MeshPhongMaterial({color:16777215})],(group=new THREE.Group).position.y=0,scene.add(group),loadFont();var l=new THREE.Mesh(new THREE.PlaneBufferGeometry(1e4,1e4),new THREE.MeshBasicMaterial({color:16777215,opacity:0,transparent:!0}));l.position.y=100,l.rotation.x=-Math.PI/2,scene.add(l),(renderer=new THREE.WebGLRenderer({alpha:!0})).setPixelRatio(window.devicePixelRatio),renderer.setSize(522,522),e.appendChild(renderer.domElement),stats=new Stats}function animate(){requestAnimationFrame(animate),update()}function update(){renderer.render(scene,camera)}function buttons(){document.getElementById("buttonRed").addEventListener("click",function(){pointLight.color.setHex(16711680),console.log(pointLight.color+"Red")},!1),document.getElementById("buttonYellow").addEventListener("click",function(){pointLight.color.setHex(16768620),console.log("Yellow")},!1),document.getElementById("buttonGreen").addEventListener("click",function(){pointLight.color.setHex(65280)},!1),document.getElementById("buttonAqua").addEventListener("click",function(){pointLight.color.setHex(65535)},!1),document.getElementById("buttonBlue").addEventListener("click",function(){pointLight.color.setHex(6130687)},!1),document.getElementById("buttonViolet").addEventListener("click",function(){pointLight.color.setHex(11887312)},!1),document.getElementById("buttonGray").addEventListener("click",function(){pointLight.color.setHex(8421504)},!1),document.getElementById("mySize").addEventListener("click",function(){console.log(document.getElementById("mySize").value),size=document.getElementById("mySize").value,refreshText()},!1),document.getElementById("myThick").addEventListener("click",function(){bevelThickness=document.getElementById("myThick").value,console.log(document.getElementById("myThick").value),refreshText()},!1)}function boolToNum(e){return e?1:0}function myText(){text=document.getElementById("textInput").value,refreshText()}function fontOne(){fontName="NanumMyeongjo",loadFont()}function fontTwo(){fontName="Dream1",loadFont()}function fontThree(){fontName="TmonMonsoriBlack",loadFont()}function textRegular(){fontWeight="Regular",loadFont()}function textBold(){fontWeight="Bold",loadFont()}function loadFont(){(new THREE.FontLoader).load("fonts/"+fontName+"_"+fontWeight+".typeface.json",function(e){font=e,refreshText()})}function createText(){if((textGeo=new THREE.TextGeometry(text,{font:font,size:size,height:height,curveSegments:curveSegments,bevelThickness:bevelThickness,bevelSize:bevelSize,bevelEnabled:bevelEnabled})).computeBoundingBox(),textGeo.computeVertexNormals(),!bevelEnabled)for(var e=height*size*.1,t=0;t<textGeo.faces.length;t++){var o=textGeo.faces[t];if(1==o.materialIndex){for(var n=0;n<o.vertexNormals.length;n++)o.vertexNormals[n].z=0,o.vertexNormals[n].normalize();var i=textGeo.vertices[o.a],r=textGeo.vertices[o.b],a=textGeo.vertices[o.c];if(THREE.GeometryUtils.triangleArea(i,r,a)>e)for(n=0;n<o.vertexNormals.length;n++)o.vertexNormals[n].copy(o.normal)}}var d=-.5*(textGeo.boundingBox.max.x-textGeo.boundingBox.min.x);textGeo=(new THREE.BufferGeometry).fromGeometry(textGeo),(textMesh1=new THREE.Mesh(textGeo,materials)).position.x=d,textMesh1.position.y=-20,textMesh1.position.z=0,textMesh1.rotation.x=0,textMesh1.rotation.y=0,group.add(textMesh1)}function refreshText(){group.remove(textMesh1),mirror&&group.remove(textMesh2),text&&createText()}function animate(){requestAnimationFrame(animate),render()}function render(){group.rotation.x+=rotationX,group.rotation.y+=rotationY,console.log(group.rotation.y),camera.lookAt(cameraTarget),renderer.clear(),renderer.render(scene,camera)}function renderX(){group.rotation.x=0,group.rotation.y=0,rotationX=.01,rotationY=0}function renderY(){group.rotation.x=0,group.rotation.y=0,rotationX=0,rotationY=.01}function renderZero(){group.rotation.x=0,group.rotation.y=0,rotationX=0,rotationY=-.01}function effectOne(){document.getElementById("myVid").setAttribute("src",videoSource[0]),document.getElementById("myVid").load(),document.getElementById("myVid").loop=!0,document.getElementById("myVid").play(),refreshText()}function effectTwo(){document.getElementById("myVid").setAttribute("src",videoSource[1]),document.getElementById("myVid").load(),document.getElementById("myVid").loop=!0,document.getElementById("myVid").play(),refreshText()}function effectThree(){document.getElementById("myVid").setAttribute("src",videoSource[2]),document.getElementById("myVid").load(),document.getElementById("myVid").loop=!0,document.getElementById("myVid").play(),refreshText()}function reset(){window.location.reload()}init(),buttons(),animate();