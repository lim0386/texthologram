var pointLight,stats,permalink,hex,camera,cameraTarget,scene,renderer,group,textMesh1,textMesh2,textGeo,materials,canvas=document.getElementById("myCanvas");!1===WEBGL.isWebGLAvailable()&&document.body.appendChild(WEBGL.getWebGLErrorMessage()),THREE.Cache.enabled=!0;var firstLetter=!1,text="",height=20,size=70,hover=30,curveSegments=4,bevelThickness=2,bevelSize=1.5,bevelEnabled=!0,font=void 0,fontName="NanumMyeongjo",fontWeight="Regular",rotationX=0,rotationY=0,textX=0,textY=400,textZ=700,mirror=!0,fontMap={NanumMyeongjo:0,NanumGothic:1,optimer:2},weightMap={Regular:0,Bold:1};function decimalToHex(e){var t=Number(e).toString(16);return(t="000000".substr(0,6-t.length)+t).toUpperCase()}function init(){const e=document.createElement("div");document.body.appendChild(e),camera=new THREE.PerspectiveCamera(30,window.innerWidth/window.innerHeight,1,1500),console.log(textX,textY,textZ),camera.position.set(textX,textY,textZ),cameraTarget=new THREE.Vector3(0,150,0),(scene=new THREE.Scene).fog=null;var t=new THREE.DirectionalLight(16777215,.125);t.position.set(0,0,1).normalize(),scene.add(t),(pointLight=new THREE.PointLight(16777215,1.5)).position.set(0,100,90),scene.add(pointLight),0==document.location.hash.substr(1).length&&(pointLight.color.setHSL(Math.random(),1,.5),hex=decimalToHex(pointLight.color.getHex())),materials=[new THREE.MeshPhongMaterial({color:16777215,flatShading:!0}),new THREE.MeshPhongMaterial({color:16777215})],(group=new THREE.Group).position.y=100,scene.add(group),loadFont();var n=new THREE.Mesh(new THREE.PlaneBufferGeometry(1e4,1e4),new THREE.MeshBasicMaterial({color:16777215,opacity:0,transparent:!0}));n.position.y=100,n.rotation.x=-Math.PI/2,scene.add(n),(renderer=new THREE.WebGLRenderer({antialias:!0})).setPixelRatio(window.devicePixelRatio),renderer.setSize(window.innerWidth/3,window.innerHeight/3),e.appendChild(renderer.domElement),stats=new Stats,window.addEventListener("resize",onWindowResize,!1)}function buttons(){document.getElementById("buttonRed").addEventListener("click",function(){pointLight.color.setHex(16711680),console.log(pointLight.color+"Red")},!1),document.getElementById("buttonYellow").addEventListener("click",function(){pointLight.color.setHex(16776960),console.log("Yellow")},!1),document.getElementById("buttonGreen").addEventListener("click",function(){pointLight.color.setHex(65280)},!1),document.getElementById("buttonAqua").addEventListener("click",function(){pointLight.color.setHex(65535)},!1),document.getElementById("buttonBlue").addEventListener("click",function(){pointLight.color.setHex(255)},!1),document.getElementById("buttonGray").addEventListener("click",function(){pointLight.color.setHex(8421504)},!1)}function onWindowResize(){windowHalfX=window.innerWidth/2,camera.aspect=window.innerWidth/window.innerHeight,camera.updateProjectionMatrix(),renderer.setSize(window.innerWidth/3,window.innerHeight/3)}function boolToNum(e){return e?1:0}function myText(){text=document.getElementById("textInput").value,refreshText()}function fontOne(){fontName="NanumMyeongjo",loadFont()}function fontTwo(){fontName="NanumGothic",loadFont()}function fontThree(){fontName="helvetiker",loadFont()}function textRegular(){fontWeight="Regular",loadFont()}function textBold(){fontWeight="Bold",loadFont()}function loadFont(){(new THREE.FontLoader).load("fonts/"+fontName+"_"+fontWeight+".typeface.json",function(e){font=e,refreshText()})}function createText(){if((textGeo=new THREE.TextGeometry(text,{font:font,size:size,height:height,curveSegments:curveSegments,bevelThickness:bevelThickness,bevelSize:bevelSize,bevelEnabled:bevelEnabled})).computeBoundingBox(),textGeo.computeVertexNormals(),!bevelEnabled)for(var e=height*size*.1,t=0;t<textGeo.faces.length;t++){var n=textGeo.faces[t];if(1==n.materialIndex){for(var o=0;o<n.vertexNormals.length;o++)n.vertexNormals[o].z=0,n.vertexNormals[o].normalize();var i=textGeo.vertices[n.a],r=textGeo.vertices[n.b],a=textGeo.vertices[n.c];if(THREE.GeometryUtils.triangleArea(i,r,a)>e)for(o=0;o<n.vertexNormals.length;o++)n.vertexNormals[o].copy(n.normal)}}var c=-.5*(textGeo.boundingBox.max.x-textGeo.boundingBox.min.x);textGeo=(new THREE.BufferGeometry).fromGeometry(textGeo),(textMesh1=new THREE.Mesh(textGeo,materials)).position.x=c,textMesh1.position.y=0,textMesh1.position.z=0,textMesh1.rotation.x=0,textMesh1.rotation.y=0,group.add(textMesh1)}function refreshText(){group.remove(textMesh1),mirror&&group.remove(textMesh2),text&&createText()}function animate(){requestAnimationFrame(animate),render()}function render(){group.rotation.x+=rotationX,group.rotation.y+=rotationY,camera.lookAt(cameraTarget),renderer.clear(),renderer.render(scene,camera)}function renderX(){group.rotation.x=0,group.rotation.y=0,rotationX=.01,rotationY=0}function renderY(){group.rotation.x=0,group.rotation.y=0,rotationX=0,rotationY=.01}function renderZero(){group.rotation.x=0,group.rotation.y=0,rotationX=0,rotationY=0}init(),buttons(),animate();